Redis缓存的使用，极大的提高了应用程序的性能和效率，特别是在数据查询方面。但同时也带来了一定的问题，其中最要害的问题就是数据一致性问题。严格意义上讲这个问题是无解的。如果对数据一致性要求很高，那么就不能使用缓存。

**缓存穿透**

缓存穿透，是指查询一个数据库一定不存在的数据。正常的使用缓存流程大致是，数据查询先进行缓存查询，如果key不存在或者key已经过期，再对数据库进行查询，并把查询到的对象，放进缓存。如果数据库查询对象为空，则不放进缓存。

**缓存雪崩**

缓存雪崩，是指在某一个时间段，缓存集中过期失效。

**缓存击穿**

缓存击穿，是指一个key非常热点，在不停的扛着大并发，大并发集中对这一个点进行访问，当这个key在失效的瞬间，持续的大并发就穿破缓存，直接请求数据库，就像在一个屏障上凿开了一个洞。

**RedisTemplate和StringRedisTemplate的区别**

1. 两者的关系是StringRedisTemplate继承RedisTemplate.

2. 两者的数据是部共通的；也就是说StringRedisTemplate只能管理StringRedisTemplate里面的数据，RedisTemplate只能管理RedisTemplate里面的数据。

3. SDR默认采用的序列化策略有两种，一种是String的序列化策略，一种是JDK的序列化策略。

StringRedisTemplate默认采用的是String的序列化策略，保存的key和value都是采用此策略序列化保存的。

RedisTemplate默认采用的是JDK的序列化策略，保存的key和value都是采用此策略序列化保存的。

总结：

当你的redis数据库里面本来存的是字符串数据或者你要存取的数据就是字符串类型数据的时候，那么你就使用StringRedisTemplate即可，但是如果你的数据是复杂的对象类型，而取出的时候又不想做任何的数据转换，直接从Redis里面取出一个对象，那么使用RedisTemplate是更好的选择。


**1. 有人说Redis只适合用来做缓存，当数据库来用则不合适，你怎么看？**

**Redis能否做数据库用取决于以下几个条件：**

1. 数据量: redis是内存数据库，要受限于内存的容量。

2. 数据的结构：是否能够将关系型数据结构都转换成key/value的形式

3. 查询的效率：对范围查询等，是否能转换为搞笑的hash索引查询

**Redis能不能用来当数据库，取决于你想要存储什么数据：**

如果你打算存储一些临时数据，数据规模不大，不需要太复杂的查询，但是要求性能比较高，这种情况下是可以当数据库使用的。

**能否用来做数据库，要看具体的需求：**

1. redis的持久化有问题，如果使用的是aof模式，并且设置的是fsync always方式，那么性能会很低，如果数据结构非常适用于适用redis存储并且对性能要求不高，或者对性能要求很高但允许一定程度的丢失数据，则可以。

2. redis数据都是存储在内存中的，如果内存满了，数据就不会存储到硬盘上了。

redis是一种key/value的内存数据库，项目里基本上都是用来做缓存的，可以对数据设置过期时间，时间到了之后就会被清理掉。

**2. 为什么Redis先执行指令，之后在记录AOF日志，而不是像其他存储引擎一样反过来呢？**

因为Redis会在收到客户端修改指令后，进行参数校验、逻辑处理，如果没有问题，就立即将该指令文本存储到AOF日志中，也就是说，先执行指令才将日志存盘。如果反过来，则可能会存入很多无效的指令（或者错误指令）。


























